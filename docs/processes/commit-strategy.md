# コミット戦略

最終更新日: 2025-08-30

## 基本方針

TaskChute プロジェクトでは、変更履歴の明確化とレビュー容易性のために、シンプルで一貫したコミット戦略を採用します。

## コミットの粒度

以下の原則に基づいて、適切な粒度でコミットします：

1. **機能単位**
   - 1つの機能実装が完了した時点でコミット
   - Red-Green-Refactorサイクルが一巡した時点でコミット
   - 機能が大きい場合は、論理的にまとまった部分ごとに分割

2. **テストコード**
   - テスト先行開発に基づき、テストコードが一通り書けた段階でコミット
   - テストの大幅な追加・修正時にコミット

3. **設定変更**
   - 開発環境の設定ファイル追加・変更時
   - 依存関係の追加・更新時
   - ビルド設定の変更時

4. **ドキュメント**
   - 新しいドキュメントの追加時
   - 既存ドキュメントの大幅な更新時
   - ADRの追加・更新時

5. **リファクタリング**
   - コード構造の改善
   - パフォーマンス最適化
   - 命名規則の統一やコードスタイルの修正

## コミットメッセージ規約

コミットメッセージは Conventional Commits 形式に従います：

```
<type>: <簡潔な概要>

<詳細（必要に応じて）>
```

typeの種類:
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響しない変更（空白、フォーマットなど）
- `refactor`: バグ修正や機能追加ではないコード変更
- `test`: テストコードの追加・修正
- `chore`: ビルドプロセスやツール、ライブラリの変更

## ブランチ/マージ戦略

1. 開発ブランチは `{type}/{short-scope}`（例: `feat/cli-init`）
2. テストが Green であることを確認して PR を作成
3. PR には目的/変更点/動作確認/関連ドキュメント更新（ADR/仕様）の記載を含める
4. main へマージ（squash 可）。CI が RED の場合は修正して再実行

## 補足

- コード + テスト + ドキュメントを同一コミットで更新する（ドキュメント駆動/TDD の一貫性）
- 破壊的な変更はコミットメッセージに BREAKING CHANGE を明記
- 仕様/設計の重要決定は ADR で追跡し、PR からリンクする
