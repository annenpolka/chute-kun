# TaskChute開発計画書

*最終更新日: 2025-03-03*

## 開発ロードマップ

### フェーズ1: 基盤実装（現在）

- [x] プロジェクト初期化とTypeScript設定
- [x] Jest テスト環境構築
- [x] Todoist API接続基盤の実装
- [x] タスク取得機能の実装
- [ ] 開発状況のドキュメント作成
- [ ] タスクモデルの定義と拡張

### フェーズ2: タスク分析とタイムブロック生成

- [ ] 優先度分析機能の実装
  - [ ] プロジェクト・ラベルに基づく優先度設定
  - [ ] コンテンツベースの優先度推定
  - [ ] ユーザー指定の優先度との統合

- [ ] 所要時間予測機能
  - [ ] タスク内容からの所要時間予測
  - [ ] 過去ログからの学習機能（準備）
  - [ ] デフォルト値の設定と調整機能

- [ ] タイムブロックモデル実装
  - [ ] TimeBlockインターフェース定義
  - [ ] タイムブロック生成ロジック
  - [ ] スケジュール最適化アルゴリズム

### フェーズ3: CLI実装と実績記録

- [ ] CLIインターフェース実装
  - [ ] コマンドライン引数処理
  - [ ] 対話型インターフェース
  - [ ] タイムブロック表示フォーマット

- [ ] 実績記録機能
  - [ ] タスク開始/完了記録
  - [ ] Todoistタスクコメントへの記録
  - [ ] 差分分析と統計表示

- [ ] 設定管理システム
  - [ ] 設定ファイル処理
  - [ ] カスタマイズ可能なパラメータ
  - [ ] ユーザーフィードバック機能

### フェーズ4: 拡張機能とパフォーマンス向上

- [ ] LLM統合
  - [ ] Gemini APIクライアント実装
  - [ ] プロンプト設計と最適化
  - [ ] レスポンス処理

- [ ] 学習システム
  - [ ] ユーザー行動データ収集
  - [ ] パターン分析と改善提案
  - [ ] 予測精度の継続的改善

- [ ] UI拡張（オプション）
  - [ ] シンプルなWebインターフェース
  - [ ] カレンダー連携
  - [ ] モバイル対応検討

## 開発タスク詳細（短期計画）

### タスクモデル実装（優先度: 高）

1. タスクモデルの拡張
   - 所要時間フィールドの追加
   - カスタム優先度ロジックの実装
   - Todoistタスクとの変換ロジック

2. Todoistタスク拡張
   - カスタム属性の取り扱い
   - コメント構造化データの処理
   - 繰り返しタスクの扱い

### タスク分析機能（優先度: 高）

1. 優先度計算アルゴリズム
   - 緊急度/重要度の判定ロジック
   - プロジェクト・ラベルに基づく重み付け
   - 複合スコアの計算

2. 所要時間予測
   - 単語数に基づく基本予測
   - タスク種別による係数設定
   - ユーザー指定の優先

### タイムブロック生成（優先度: 中）

1. データ構造設計
   - タイムブロックのインターフェース
   - スケジュールデータモデル
   - 休憩時間の設定

2. スケジューリングアルゴリズム
   - 優先度ベースのソート
   - 時間枠への割り当て
   - 休憩時間自動挿入

## 技術的検討事項

### 1. パフォーマンス

- メモリ使用量の最適化
- API呼び出し回数の最小化
- キャッシュ戦略

### 2. エラーハンドリング

- API接続エラーへの対応
- データ不整合への対応
- グレースフルなフォールバック

### 3. テスト戦略

- ユニットテストカバレッジ向上
- 統合テストの追加
- モック戦略の最適化

### 4. コード品質

- リファクタリングポイントの識別
- any型使用の最小化
- コメント・ドキュメント基準の厳格化

## 開発評価指標

1. コードカバレッジ: 80%以上を目標
2. API呼び出し効率: 1セッションあたり5回以内
3. 予測精度: 所要時間の誤差±20%以内
4. ビルドサイズ: 最終パッケージ30MB以下