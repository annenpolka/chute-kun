# ADR-004: 技術スタックの方向性決定

## ステータス
更新中

## 日付
2025-03-02 (更新)

## コンテキスト
TaskChuteアプリケーションの実装にあたり、様々な技術オプションを評価しました（docs/decisions/technology-evaluation.md参照）。追加の要件明確化により、オフライン動作は必須ではなく、外部連携はTodoist APIのみであることが確認されました。また、UIよりも機能性を重視し、ヘッドレスなアプローチを優先することが決定されました。

## 決定
以下の方向性でTaskChuteアプリケーションの技術スタックを検討します：

1. **コアロジック**: TypeScript (Node.js)
2. **インターフェース**: コマンドラインインターフェース (CLI) 優先
3. **タスク管理API**: Todoist REST API v2
4. **自動化**: cron/定期実行スクリプト
5. **LLM API**: OpenAI API（初期実装）、後にAnthropicオプションも追加
6. **補助的UI**: 必要に応じてシンプルなWebインターフェースを検討

## 根拠

1. **機能重視とシンプル化**:
   - ヘッドレスアプローチにより、機能の自動化と効率化に集中
   - UIの複雑さを排除し、コアロジックに開発リソースを集中
   - バッチ処理とスクリプトによる自動化が容易

2. **開発効率とメンテナンス性**:
   - TypeScriptによる型安全性で保守性が向上
   - Node.jsのエコシステムを活用した効率的な開発
   - CLIフレームワーク（例：commander, yargs）の充実度

3. **拡張性と柔軟性**:
   - モジュール分割によるコードの再利用性向上
   - 必要に応じて後からUIレイヤーを追加可能
   - 異なる実行環境（定期実行、手動実行）に対応可能

## 影響

1. **肯定的影響**:
   - コアロジックへの集中による開発効率の向上
   - 自動化による利用者の負担軽減
   - シンプルな構成によるメンテナンス性の向上
   - デプロイと運用の簡素化（npm packageとしての配布も可能）

2. **否定的影響**:
   - グラフィカルなUIが必要な場合の追加コスト
   - 一般ユーザーにとってのアクセシビリティの課題
   - CLIの使い方の学習コスト

## 実装アプローチ

1. **最小実装から始める**:
   - Todoist APIクライアントの実装
   - コマンドラインインターフェース基盤の構築
   - LLMによるタイムブロック生成の基本機能

2. **段階的な機能追加**:
   - 自動タスク整理機能
   - 定期実行スクリプトの実装
   - 設定とカスタマイズ機能

3. **アーキテクチャの進化**:
   - 機能ごとのモジュール分割
   - LLM APIのラッパー抽象化（プロバイダー切り替え可能に）
   - 補助的なwebビューワーの検討（オプション）

## 代替案と検討事項

1. **フロントエンド中心の実装**:
   - より直感的なユーザー体験
   - 視覚的なタイムブロック表示
   - 実装複雑性とコストの増加

2. **Python実装**:
   - データ分析ライブラリの豊富さ
   - LLM連携ライブラリの充実
   - 配布と環境構築の複雑さ

3. **Electronアプリケーション**:
   - ネイティブアプリの使い勝手
   - システムリソースへの完全アクセス
   - 開発とメンテナンスコストの増加

これらの代替案は、実装開始後のプロトタイピングフェーズで再評価し、必要に応じて方向性を修正します。特に、ユーザーフィードバックに基づいてUIの追加を検討することもあります。

## 関連
- docs/decisions/technology-evaluation.md（技術選定評価）
- docs/processes/decisions-log.md（2025-03-01の決定項目）
- docs/adr/ADR-003-Serverless-Architecture.md（サーバーレスアーキテクチャ）