# TaskChuteシステム概要

*最終更新日: 2025-03-01*

## システム目的
TaskChuteシステムは、大橋悦夫氏の考案したタスク管理メソッドを基に、Todoistと連携してLLM支援によるインテリジェントなタイムブロッキングを実現するアプリケーションです。今日のタスクに適切な所要時間と優先度を自動的に割り当て、効率的な時間管理をサポートします。

## 基本機能

### 1. Todoistタスクの取得と分析
- 今日実行予定のタスクをTodoist APIから取得
- タスクの説明、ラベル、プロジェクト情報を収集
- 過去の実績データがある場合はそれも参照

### 2. LLMによるタスク分析
- 各タスクの**優先度判定**（重要度・緊急度）
- 各タスクの**所要時間予測**（分単位）
- タスクの依存関係や前後関係の推定
- 類似タスクの過去実績データを学習に活用

### 3. インテリジェントなタイムブロック生成
- 優先度と所要時間に基づいた最適なタイムテーブル作成
- 具体的な時間枠の割り当て（例：9:00-10:30）
- ポモドーロテクニックによる休憩時間の挿入
- ユーザーの生産性パターンに応じた配置（朝型/夜型など）

### 4. 実績記録と学習
- 実際の所要時間をコメントとして記録
- 予測と実績の差異分析
- 将来の所要時間予測精度向上のためのデータ蓄積
- ユーザーのタスク実行パターンの学習

## システムアーキテクチャ

```
┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐
│  クライアント   │      │  タイムブロック │      │  Todoist API    │
│  アプリケーション│◄────►│  生成エンジン   │◄────►│                 │
└─────────────────┘      └─────────────────┘      └─────────────────┘
                                 ▲
                                 │
                                 ▼
                         ┌─────────────────┐      ┌─────────────────┐
                         │  LLM API        │◄────►│  学習データ     │
                         │  (推論エンジン) │      │  ストレージ     │
                         └─────────────────┘      └─────────────────┘
```

## コンポーネント構成

### 1. クライアントアプリケーション
- ユーザーインターフェース（タイムブロック表示、調整機能）
- Todoist認証と接続管理
- オフライン機能とデータキャッシュ

### 2. タイムブロック生成エンジン
- Todoistタスクのフェッチとフィルタリング
- LLMリクエストの構築と送信
- タイムブロックアルゴリズム実装
- 結果の最適化と表示準備

### 3. 外部API連携
- **Todoist API**: タスクデータの取得と更新
- **LLM API**: タスク分析と時間/優先度予測
- **カレンダーAPI**: 予定との調整（オプション）

### 4. データストレージ
- 過去の実績データ保存
- ユーザー設定とプリファレンス
- LLM学習用データセット管理

## データフロー

1. **朝のタイムブロック生成**:
   - Todoistから今日のタスク取得 → LLMによる分析 → タイムブロック生成 → ユーザーに表示

2. **タスク実行と記録**:
   - タスク開始・完了時刻の記録 → 実績時間の計算 → Todoistコメントへの保存

3. **学習サイクル**:
   - 予測と実績の差分抽出 → LLM学習データに追加 → 将来予測の精度向上

## サーバーレス設計（検討中）
- クライアントサイド主体の実装
- スクリプト型の実行環境
- ローカルストレージの活用
- 間欠的なAPI接続

## 統合ポイント

1. **Todoistとの統合**:
   - タスク → 分析対象の作業単位
   - タスクコメント → 実績時間の記録場所
   - ラベル → タスク特性の識別子
   - セクション → 時間帯・場所などのグルーピング

2. **LLMとの統合**:
   - タスク特性の抽出
   - 類似タスクパターンの認識
   - 優先度と所要時間の予測
   - 実績データからの学習

## 将来拡張
- 週間・月間タイムブロックへの拡張
- 複数人での共同作業スケジューリング
- 自動タスク調整（実績に基づく日中の再調整）
- 複数バックエンド対応（Microsoft To Do, Asana等）